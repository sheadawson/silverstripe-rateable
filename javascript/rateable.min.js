!function(s){function a(s){s&&0==e.data("disablealert")&&alert(s)}var e=s(".rateable-ui"),i=e.find("button");i.hover(function(){s(this).prevAll().addClass("is-hover"),s(this).addClass("is-hover")},function(){s(this).prevAll().removeClass("is-hover"),s(this).removeClass("is-hover")}),i.focus(function(){s(this).prevAll().addClass("is-focused"),s(this).addClass("is-focused")}),i.blur(function(){s(this).siblings().removeClass("is-focused"),s(this).removeClass("is-focused")}),i.click(function(r){if(r.preventDefault(),!e.hasClass("is-waiting-on-ajax")){var t=s(this),o=s(this).val();e.addClass("is-waiting-on-ajax"),s.getJSON(e.data("ratepath")+"?score="+o).fail(function(s,a,i){e.html(a),e.trigger("ratingError",data)}).done(function(r){return"error"==r.status?void a(r.message):("undefined"!=typeof r.isremovingrating&&1==r.isremovingrating?(r.isremovingrating=1,t.siblings().removeClass("has-voted"),t.removeClass("has-voted"),e.removeClass("has-voted")):(r.isremovingrating=0,t.nextAll().removeClass("has-voted"),t.prevAll().addClass("has-voted"),t.addClass("has-voted"),e.addClass("has-voted")),i.length>1?i.each(function(a){var e=s(this).val();e<=r.averagescore?s(this).addClass("is-average-score"):s(this).removeClass("is-average-score")}):i.removeClass("is-average-score"),s(".js-rateable-numberofratings").html(r.numberofratings),a(r.message),void e.trigger("ratingChange",r))}).always(function(s){e.removeClass("is-waiting-on-ajax"),e.trigger("ratingFinished",s)})}}),e.trigger("ratingInit")}(jQuery);